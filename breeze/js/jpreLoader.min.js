(function(e) {
    var t = new Array,
        n = new Array,
        r = function() {},
        i = 0;
    var s = {
        splashVPos: "35%",
        loaderVPos: "75%",
        splashID: "#jpreContent",
        showSplash: true,
        showPercentage: true,
        debugMode: false,
        splashFunction: function() {}
    };
    var o = function(n) {
        e(n).find("*:not(script)").each(function() {
            var n = "";
            if (e(this).css("background-image").indexOf("none") == -1) {
                n = e(this).css("background-image");
                if (n.indexOf("url") != -1) {
                    var r = n.match(/url\((.*?)\)/);
                    n = r[1].replace(/\"/g, "")
                }
            } else if (e(this).get(0).nodeName.toLowerCase() == "img" && typeof e(this).attr("src") != "undefined") {
                n = e(this).attr("src")
            }
            if (n.length > 0) {
                t.push(n)
            }
        })
    };
    var u = function() {
        for (var e = 0; e < t.length; e++) {
            a(t[e])
        }
    };
    var a = function(t) {
        var r = new Image;
        e(r).load(function() {
            f()
        }).error(function() {
            n.push(e(this).attr("src"));
            f()
        }).attr("src", t)
    };
    var f = function() {
        i++;
        var n = Math.round(i / t.length * 100);
        $(".splash_text").html(n + "<span>%</span>");
        $(".splash_bw").css({
            height: (160 - n) / 2 + "%"
        });
        e(jBar).stop().animate({
            width: n + "%"
        }, 500, "linear");
        if (s.showPercentage) {
            e(jPer).text(n + "%")
        }
        if (i >= t.length) {
            i = t.length;
            if (s.debugMode) {
                var r = c()
            }
            l()
        }
    };
    var l = function() {
        e(jBar).stop().animate({
            width: "100%"
        }, 500, "linear", function() {
            $("body").css({
                "overflow-y": "auto"
            });
            $(".landing").css({
                opacity: 1
            });
            window.scrollTo(0, 0);
            e(jOverlay).css({
                display: "inline-block"
            }).fadeOut(function() {
                e(jOverlay).remove();
                r()
            })
        })
    };
    var c = function() {
        if (n.length > 0) {
            var e = "ERROR - IMAGE FILES MISSING!!!\n\r";
            e += n.length + " image files cound not be found. \n\r";
            e += "Please check your image paths and filenames:\n\r";
            for (var t = 0; t < n.length; t++) {
                e += "- " + n[t] + "\n\r"
            }
            return true
        } else {
            return false
        }
    };
    var h = function(t) {
        jOverlay = e("<div></div>").attr("id", "jpreOverlay").css({
            position: "fixed",
            top: 0,
            left: 0,
            width: "100%",
            height: "100%",
            zIndex: 9999999
        }).appendTo("body");
        if (s.showSplash) {
            jContent = e("<div></div>").attr("id", "jpreSlide").appendTo(jOverlay);
            var n = e(window).width() - e(jContent).width();
            e(jContent).css({
                position: "absolute",
                top: s.splashVPos,
                left: Math.round(50 / e(window).width() * n) + "%"
            });
            e(jContent).html(e(s.splashID).wrap("<div/>").parent().html());
            e(s.splashID).remove();
            s.splashFunction()
        }
        jLoader = e("<div></div>").attr("id", "jpreLoader").appendTo(jOverlay);
        var r = e(window).width() - e(jLoader).width();
        e(jLoader).css({
            position: "absolute"
        });
        jBar = e("<div></div>").attr("id", "jpreBar").css({
            width: "0%",
            height: "100%"
        }).appendTo(jLoader);
        if (s.showPercentage) {
            jPer = e("<div></div>").attr("id", "jprePercentage").css({
                position: "relative",
                height: "100%"
            }).appendTo(jLoader).html("Loading...")
        }
    };
    e.fn.jpreLoader = function(t, n) {
        if (t) {
            e.extend(s, t)
        }
        if (typeof n == "function") {
            r = n
        }
        h(this);
        o(this);
        u();
        return this
    }
})(jQuery)